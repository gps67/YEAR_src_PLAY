. ../go__fns

# 2021-03-01 Mar Mon 01:21
# start again from 9

# set tools dirs ...


#	https://ftp.gnu.org/gnu/gcc/gcc-10.2.0/
#	manually downloaded

	fn_grp_pkg gcc10 gcc-10.2.0
#	fn_grp_pkg ccs4-$YEARMMDD gcc
	mkdir ${tools_2000}_obj/ccs10 || echo IGNORED
#	mkdir ${tools_2000}_obj/ccs4-$YEARMMDD || echo OK

	fn_unpack
# exit

# want ccs to go first in PATH - use pfx not add 
# ccs is binutils, make, ... and other ccs other than ccs4 compiler

	fn_with_grp ccs	

# problems with fixinclues picking up the /usr/include/... before /tools

	fn_with_grp_all

#	fn_with_grp ccs9 # use old gcc to compile new ...
	fn_with_grp gcc10 # use old gcc to compile new ...

# put the preferred (old) compiler at the front

#	var_pfx PATH $tools_2000/ccs4-$yearmmdd/bin
#	var_pfx PATH $tools_2000/ccs9/bin
	var_pfx PATH $tools_2000/gcc10/bin
	# last pfx added is first # last line wins

# HPUX wont do gij/alien fun call asm needed

	fn_configure_pfx \
	--enable-shared \
	--enable-threads=posix \
	--enable-languages=c,c++ \
	--disable-multilib \
#	--enable-languages=java \
#
	# --enable-interpreter \
	# --enable-languages=c++,java \
	# --enable-languages=c \
#

# so which compiler built this one ?
# fn_log expects obj dir to exist

	fn_log type gcc
	fn_log type as
	fn_log gcc --version
	fn_log as --version

# fn_make bootstrap || exit
(
	fn_make || exit # needed to build libstd++ ?? # uses obj/xcc
)

	fn_make -i install 

echo
echo "ccache -C # clears all # run it or regret it"
echo

#fn_make install || exit

	echo "#  ln -fs ccs4-$yearmmdd/ /tools/2000/ccs4"

	beep_me $0 "$@"

